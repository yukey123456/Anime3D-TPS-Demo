<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../public/favicon.webp" />
		<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.6.1/github-markdown.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/katorlys/prism-theme-github/themes/prism-theme-github-light.css">
		<link rel="stylesheet" href="../public/style.css?v=3">
		<meta name="viewport" content="width=device-width" />
		<meta name="color-scheme" content="only light">
		
		<link href="../_app/immutable/assets/2.943ae827.css" rel="stylesheet"><title>Lattice Modifier for Unity</title><!-- HEAD_svelte-3ezosi_START --><!-- HEAD_svelte-3ezosi_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">  <main id="test"> <div id="web">   <div id="content">  <div class="content"><div class="sidebar markdown-body"><p><a href="./index.html">Lattice Modifier for Unity</a><br><a href="./getting-started.html">Getting Started</a><br><a href="./lattices.html">Using Lattices</a><br><a href="./samples.html">Included Samples</a><br><a href="./components.html">Components</a><br><a href="./roadmap.html">Roadmap</a><br></p></div> <div class="docs markdown-body"><h1 data-svelte-h="svelte-1189v5j">Using Lattices</h1> <h2 data-svelte-h="svelte-kjwubi">The Editor</h2> <p data-svelte-h="svelte-xh5d5p"><img src="../public/lattice/lattices/editor-demo.webp"></p> <p data-svelte-h="svelte-4wu96e">To edit Lattices, make sure <a href="https://docs.unity3d.com/Manual/GizmosMenu.html" rel="nofollow">Gizmos</a> are enabled.</p> <p data-svelte-h="svelte-3wuzg4">The editor currently supports:</p> <ul data-svelte-h="svelte-1mk6j5d"><li><p><strong>Multiselection</strong> of handles<br>
Hold <code>Shift</code> to select multiple handles at a time. Drag click to use a selection box (holding <code>Shift</code> will add or remove from current selection)</p></li> <li><p><strong>Focusing</strong> with <code>F</code><br>
Focuses on the currently selected handles. If no handles are selected, focuses on the whole Lattice</p></li> <li><p><strong>Center and Pivot</strong> position modes<br>
When pivot is selected the last selected handle will act as the pivot point.</p></li> <li><p><strong>Global and Local</strong> rotation modes<br>
Both rotation modes are supported, global will show the tool in world space, and local in Lattice space</p></li> <li><p><strong>Undo and Redo</strong><br>
Supports changing handle positions and changing selected handles</p></li> <li><p><strong>Context Menu</strong><br>
Right click when a lattice is selected to show the following operations:</p> <ul><li>Invert Selection</li> <li>Select All Handles</li> <li>Select Exterior Handles</li> <li>Reset Selected Handles</li> <li>Reset All Handles</li></ul></li></ul> <p data-svelte-h="svelte-qbovmh"><img src="../public/lattice/lattices/context-menu.webp"></p> <h3 data-svelte-h="svelte-81jksm">Animating</h3> <p data-svelte-h="svelte-skr9b8">You can keyframe Lattice handles using the animation timeline. The easiest way to do this is enable recording mode and then move the desired Lattice handles.</p> <p data-svelte-h="svelte-bptnmy"><img src="../public/lattice/lattices/animation.webp"></p> <h2 data-svelte-h="svelte-1p85krp">Scripting</h2> <p data-svelte-h="svelte-1ka6jkg">The <strong>Lattice</strong> component comes with many public methods for moving handles. Take a look at <code>Runtime/Components/Lattice.cs</code> for all the available methods, the most useful of which will be:</p> <pre class="language-cs"><!-- HTML_TAG_START --><code class="language-cs"><span class="token comment">/// Set the offset of a handle relative to its base position.</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetHandleOffset</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> z<span class="token punctuation">,</span> <span class="token class-name">Vector3</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/// Set the position of a handle in local space.</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetHandlePosition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> z<span class="token punctuation">,</span> <span class="token class-name">Vector3</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/// Set the position of a handle in world space.</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetHandleWorldPosition</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> z<span class="token punctuation">,</span> <span class="token class-name">Vector3</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <h3 data-svelte-h="svelte-qg4234">Example</h3> <p data-svelte-h="svelte-ka3np0">This script controls a Lattice to follow a sine wave, simulating cloth waving in the wind. This code is used in <a href="./samples.html">the <em>Drapes</em> sample</a>.</p> <pre class="language-cs"><!-- HTML_TAG_START --><code class="language-cs"><span class="token comment">// Fields</span>
<span class="token punctuation">[</span>SerializeField<span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">float</span></span> _speed<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">float</span></span> _scale<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">float</span></span> _distance<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name">Lattice</span> _lattice<span class="token punctuation">;</span>

<span class="token comment">// Update()</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _lattice<span class="token punctuation">.</span>Resolution<span class="token punctuation">.</span>x<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> _lattice<span class="token punctuation">.</span>Resolution<span class="token punctuation">.</span>y<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> _lattice<span class="token punctuation">.</span>Resolution<span class="token punctuation">.</span>z<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token comment">// Determine offset amount</span>
            <span class="token class-name"><span class="token keyword">float</span></span> position <span class="token operator">=</span> _scale <span class="token operator">*</span> i<span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">float</span></span> wind <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Sin</span><span class="token punctuation">(</span>_speed <span class="token operator">*</span> Time<span class="token punctuation">.</span>timeSinceLevelLoad <span class="token operator">+</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">float</span></span> offset <span class="token operator">=</span> _distance <span class="token operator">*</span> j <span class="token operator">*</span> wind<span class="token punctuation">;</span>

            <span class="token comment">// Set handle offset</span>
            _lattice<span class="token punctuation">.</span><span class="token function">SetHandleOffset</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre></div></div></div></div></main>  <div id="footer"><div id="footer-content"> <div>Last edited 11/12/2024.</div> <div id="socials" data-svelte-h="svelte-a91441"> <a href="https://twitter.com/harryh___h" class="fa fa-twitter"></a>  <a href="https://www.linkedin.com/in/harry--heath/" class="fa fa-linkedin"></a>  <a href="mailto:me@harryheath.com" class="fa fa-envelope"></a></div></div></div> </div>
	</body>
</html>
